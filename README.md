A small anti-cheat for giving weapons using the ESX framework typically works by detecting and blocking unauthorized weapon giving

Detection Mechanism: The anti-cheat monitors for unusual weapon-giving events, such as players receiving weapons outside normal game mechanics (e.g., via commands or third-party scripts).
Prevention: If an exploit is detected, it will kick the player or do what you put in the script
